!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=null,this.width=0,this.height=0,this.loaded=!1}var e,i,o;return e=t,(i=[{key:"load",value:function(t,e,i){var n=this,o=document.createElement("img");return this.dom=o,o.onload=function(){n.width=e||o.width,n.height=i||o.height,n.loaded=!0},o.src=t,this}},{key:"draw",value:function(t,e,i,n,o,r,h){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.width,a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:this.height;this.loaded&&t.drawImage(this.dom,e,i,n,o,r,h,s,a)}}])&&n(e.prototype,i),o&&n(e,o),t}();function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:197,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:281,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1.7;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.name=i,this.image=n,this.frameX=s[i].frame,this.frameY=1,this.descr=s[i].descr,this.x=o,this.y=r,this.scale=u,this.width=h/u,this.height=a/u,this.originW=h,this.originH=a}var e,i,n;return e=t,(i=[{key:"draw",value:function(){this.ctx.drawImage(this.image.dom,(this.frameX-1)*this.originW,(this.frameY-1)*this.originW,this.originW,this.originH,this.x,this.y,this.originW/this.scale,this.originH/this.scale)}},{key:"select",value:function(t,e){var i=t.height-e-20,n=this.descr.height/i;this.descr.draw(this.ctx,0,0,this.descr.width,this.descr.height,10,e+10,this.descr.width/n,i)}},{key:"intersect",value:function(t){return!(this.x+this.width<t.x||this.y+this.height<t.y||this.x>t.x+t.width||this.y>t.y+t.height)}}])&&r(e.prototype,i),n&&r(e,n),t}(),s={etilen:{frame:1,descr:(new o).load("./img/text/etilen.png"),title:"Этилен",text:"Органическое химическое соединение, описываемое формулой С2H4. Бесцветный горючий газ легче воздуха со слабым сладковатым запахом.  Играет чрезвычайно важную роль в промышленности, а также является фитогормоном. Этилен — самое производимое органическое соединение в мире."},propilen:{frame:2,descr:(new o).load("./img/text/propilen.png"),title:"Пропилен",text:"Органическое вещество, ненасыщенный углеводород из класса алкенов. При нормальных условиях — бесцветный газ со слабым неприятным запахом. Является важным продуктом промышленного синтеза и исходным сырьём для производства полипропилена и других органических соединений."},aceton:{frame:3,descr:(new o).load("./img/text/aceton.png"),title:"Ацетон",text:"Своё название ацетон получил от лат. acetum — уксус. Это связано с тем, что ранее ацетон получали из ацетатов, а из самого ацетона получали синтетическую ледяную уксусную кислоту. Ацетон является ценным промышленным растворителем и благодаря низкой токсичности он получил широкое применение. "},metiletilketon:{frame:4,descr:(new o).load("./img/text/metiletilketon.png"),title:"МЭК",text:"Это бесцветная подвижная легколетучая жидкость с запахом, напоминающим запах ацетона. Обладает всеми химическими свойствами, характерными для алифатических кетонов, используется как растворитель и сырьё в органическом синтезе.Метилэтилкетон - токсичное вещество. "},fenol:{frame:5,descr:(new o).load("./img/text/fenol.png"),title:"Фенол",text:"Представляет собой бесцветные игольчатые кристаллы, розовеющие на воздухе из-за окисления, приводящего к образованию окрашенных веществ (это связано с промежуточным образованием хинонов). Обладает специфическим запахом (таким, как запах гуаши, так как в состав гуаши входит фенол). "},bensol:{frame:6,descr:(new o).load("./img/text/bensol.png"),title:"Бензол",text:"Бензол входит в состав бензина, широко применяется в промышленности, является исходным сырьём для производства лекарств, различных пластмасс, синтетической резины, красителей.Хотя бензол входит в состав сырой нефти, в промышленных масштабах он синтезируется из других её компонентов. "},kauchuk:{frame:7,descr:(new o).load("./img/text/kauchuk.png"),title:"Этилен-пропиленовый каучук",text:"Это синтетические эластомеры. Применяются в производстве ударопрочного полипропилена, резино-технических изделий, губчатых изделий, для изоляции проводов и кабелей."},difenilolpropan:{frame:8,descr:(new o).load("./img/text/difenilolpropan.png"),title:"Дифенилол-пропан",text:"После смешения фенола с ацетоном и добавления катализатора в первое время смесь остается прозрачной и однородной, так как смешанные компоненты взаимно растворяются. Однако по мере протекания реакции жидкость становится густой и менее подвижной."},metiletilketonbensol:{frame:9,descr:(new o).load("./img/text/metiletilketonbensol.png"),title:"Метилэтил-кетон бензол",text:"Приведенные данные показывают, что метилизобутилкетон и смесь ацетона с бензолом (толуолом) лучше растворяют легкоплавкие парафины, чем смесь МЭК с бензолом (толуолом), что подтверждается данными.  "}};function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){var e,i,n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(){o.gameEngine(),o.nextStep(o.engineStep)},(i="engineStep")in(e=this)?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,this.gameEngine=null}var e,i,n;return e=t,(i=[{key:"nextStep",value:function(t){return(requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})(t)}},{key:"engineStart",value:function(t){this.gameEngine=t,this.engineStep()}},{key:"setEngine",value:function(t){this.gameEngine=t}}])&&a(e.prototype,i),n&&a(e,n),t}();function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e,i,n){l(this,t),this.ctx=e,this.x=0,this.width=0,this.height=0,this.visibleX=0,this.visibleY=0,this.elements=[],this.lastElementX=0,this.prevButton=null,this.nextButton=null,this.idNewElement=0,this.prevImage=i,this.nextImage=n,this.gapX=0,this.gapY=0}var e,i,n;return e=t,(i=[{key:"init",value:function(t,e){this.prevButton=new f(this.visibleX,this.visibleY,e/2,e),this.nextButton=new f(t-e/2,this.visibleY,e/2,e),this.calc(t,e),this.lastElementX=this.prevButton.width,this.x=this.prevButton.width,this.visibleX=this.prevButton.width}},{key:"calc",value:function(t,e){this.width=t-this.prevButton.width-this.nextButton.width,this.height=e,this.nextButton.x=t-this.nextButton.width}},{key:"add",value:function(t){t.x=this.lastElementX+this.gapX,t.y=this.visibleY+this.gapY,this.elements.push(t),this.lastElementX=t.x+t.width}},{key:"isCursorInPrevButton",value:function(t,e){return t>this.prevButton.x&&t<this.prevButton.x+this.prevButton.width&&e>this.prevButton.y&&e<this.prevButton.y+this.prevButton.height}},{key:"isCursorInNextButton",value:function(t,e){return t>this.nextButton.x&&t<this.nextButton.x+this.nextButton.width&&e>this.nextButton.y&&e<this.nextButton.y+this.nextButton.height}},{key:"isCursorInMenu",value:function(t,e){return t>this.visibleX&&t<this.visibleX+this.width&&e>this.visibleY&&e<this.visibleY+this.height}},{key:"getElement",value:function(t,e){var i=!0,n=!1,o=void 0;try{for(var r,h=this.elements[Symbol.iterator]();!(i=(r=h.next()).done);i=!0){var s=r.value;if(t>s.x&&t<s.x+s.width&&e>s.y&&e<s.y+s.height){var a=Object.create(s);return a.id=this.idNewElement++,a}}}catch(t){n=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(n)throw o}}}},{key:"prev",value:function(){var t=this;this.x<this.prevButton.width&&(this.elements.forEach(function(e){e.x+=t.width-e.width-10}),this.x=this.elements[0].x-10,this.lastElementX=this.elements[this.elements.length-1].x+this.elements[this.elements.length-1].width)}},{key:"next",value:function(){var t=this;this.lastElementX>this.width+this.prevButton.width&&(this.elements.forEach(function(e){e.x-=t.width-e.width-10}),this.x=this.elements[0].x-10,this.lastElementX=this.elements[this.elements.length-1].x+this.elements[this.elements.length-1].width)}},{key:"draw",value:function(){this.elements.forEach(function(t){t.draw()}),this.drawButtons(),this.ctx.lineWidth=4,this.ctx.beginPath(),this.ctx.moveTo(0,this.height),this.ctx.lineTo(this.width+this.prevButton.width+this.nextButton.width,this.height),this.ctx.stroke()}},{key:"drawButtons",value:function(){this.ctx.fillStyle="#EfEfEf",this.ctx.fillRect(this.prevButton.x,this.prevButton.y,this.prevButton.width,this.prevButton.height),this.ctx.fillRect(this.nextButton.x,this.nextButton.y,this.nextButton.width,this.nextButton.height),this.ctx.strokeStyle="#e6e6e9",this.ctx.strokeRect(this.prevButton.x,this.prevButton.y,this.prevButton.width,this.prevButton.height),this.ctx.strokeRect(this.nextButton.x,this.nextButton.y,this.nextButton.width,this.nextButton.height),this.prevImage.draw(this.ctx,0,0,this.prevImage.width,this.prevImage.height,this.prevButton.x,this.prevButton.y+this.prevButton.height/4,this.prevButton.width,this.prevButton.height/2),this.nextImage.draw(this.ctx,0,0,this.nextImage.width,this.nextImage.height,this.nextButton.x,this.nextButton.y+this.nextButton.height/4,this.nextButton.width,this.nextButton.height/2)}}])&&c(e.prototype,i),n&&c(e,n),t}(),f=function t(e,i,n,o){l(this,t),this.x=e,this.y=i,this.width=n,this.height=o};function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=[{reagents:["etilen","propilen"],result:"kauchuk"},{reagents:["aceton","fenol"],result:"difenilolpropan"},{reagents:["bensol","metiletilketon"],result:"metiletilketonbensol"}],p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.recipes={}}var e,i,n;return e=t,(i=[{key:"addAllRecipes",value:function(){for(var t=0,e=m;t<e.length;t++){var i=e[t],n=!0,o=!1,r=void 0;try{for(var h,s=i.reagents[Symbol.iterator]();!(n=(h=s.next()).done);n=!0){var a=h.value;this.recipes.hasOwnProperty(a)||(this.recipes[a]=[]),this.recipes[a].push(i)}}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}}}},{key:"hasRecipe",value:function(t,e){if(this.recipes.hasOwnProperty(t)){var i=!0,n=!1,o=void 0;try{for(var r,h=function(){var t=r.value,i=t.reagents.sort();return e.length!==t.reagents.length?"continue":e.sort().every(function(t,e){return t===i[e]})?{v:t.result}:void 0},s=this.recipes[t][Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=h();switch(a){case"continue":continue;default:if("object"===v(a))return a.v}}}catch(t){n=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}}return!1}}])&&g(e.prototype,i),n&&g(e,n),t}();function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.showed=!0,this.width=i.width,this.height=i.height}var e,i,n;return e=t,(i=[{key:"show",value:function(t,e){if(this.showed&&e.dom){var i=e.height/t.height,n=(t.width-e.width/i)/2;this.ctx.drawImage(e.dom,0,0,e.width,e.height,n,0,e.width/i,t.height)}}},{key:"start",value:function(t,e){t>0&&t<this.width&&e>0&&e<this.height&&(this.showed=!1)}}])&&w(e.prototype,i),n&&w(e,n),t}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}console.log;var b,B,k,E,S,I,j,P,X,O=new u,C={x:0,y:0},R=170,T=[],Y=!1,A=[],W=[];function q(t,e){e?(C.x=t.changedTouches[0].clientX-e.getBoundingClientRect().x,C.y=t.changedTouches[0].clientY-e.getBoundingClientRect().y):(C.x=t.offsetX,C.y=t.offsetY)}function M(t){var e=document.querySelector(".oil-container"),i=e.clientWidth,n=e.clientHeight;return t.width=i,t.height=n,{width:i,height:n}}function _(t){var e=T.findIndex(function(e){return e.id===t});-1!==e&&T.splice(e,1)}function F(t,e){q(t,e),"object"===x(Y)&&(Y.x=C.x-Y.width/2,Y.y=C.y-Y.height/2)}function H(t,e){if(t.preventDefault(),t.stopPropagation(),q(t,e),B.showed&&B.start(C.x,C.y),k.isCursorInNextButton(C.x,C.y)&&k.next(),k.isCursorInPrevButton(C.x,C.y)&&k.prev(),k.isCursorInMenu(C.x,C.y)){var i=k.getElement(C.x,C.y);i&&(T.push(i),Y=i)}Y||T.forEach(function(t){var e,i,n;e=C.x,i=C.y,e>(n=t).x&&e<n.x+n.width&&i>n.y&&i<n.y+n.height&&(Y=t)})}function L(){if(Y){if(Y.y<k.height)_(Y.id);else if(W=[],(A=[]).push(Y.name),T.forEach(function(t){Y.id!==t.id&&Y.intersect(t)&&(A.push(t.name),W.push(t.id))}),A.length>1){var t=E.hasRecipe(Y.name,A);if(t){-1===k.elements.findIndex(function(e){return e.name===t})&&k.add(new h(b,t,X)),W.forEach(function(t){_(t)}),_(Y.id);var e=new h(b,t,X,Y.x,Y.y);e.id=Y.id,T.push(e)}}Y=!1}}window.addEventListener("load",function(){var t=document.getElementById("oilchemist");t.style.backgroundColor="#EfEfEf",function(t){b=t.getContext("2d");var e=M(t);S=(new o).load("./img/startScreen.jpg"),I=(new o).load("./img/fonRing.svg"),j=(new o).load("./img/prevBtn.svg"),P=(new o).load("./img/nextBtn.svg"),X=(new o).load("./img/elements.svg"),B=new y(b,e),(k=new d(b,j,P)).init(e.width,R),k.add(new h(b,"etilen",X)),k.add(new h(b,"propilen",X)),k.add(new h(b,"aceton",X)),k.add(new h(b,"metiletilketon",X)),k.add(new h(b,"fenol",X)),k.add(new h(b,"bensol",X)),(E=new p).addAllRecipes(),t.onmousemove=F,t.onmousedown=H,t.onmouseup=L,t.addEventListener("touchmove",function(){return F(event,t)},!1),t.addEventListener("touchstart",function(){return H(event,t)},!1),t.addEventListener("touchend",L,!1),O.engineStart(function(){b.clearRect(0,0,e.width,e.height),B.showed?B.show(e,S):(I.draw(b,0,0,I.width,I.height,e.width-I.width,R+20,I.width,I.height),k.draw(),T.forEach(function(t){t.draw()}),Y&&(Y.draw(),Y.select(e,R)))}),window.addEventListener("resize",function(){var i;i||(i=setTimeout(function(){i=null,e=M(t),k.calc(e.width,R)},100))})}(t)})}]);